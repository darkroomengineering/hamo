import{useCallback as n,useEffect as t,useMemo as r,useLayoutEffect as e,useState as o,useRef as u}from"react";import{raf as c}from"@studio-freight/tempus";import{throttle as i}from"throttle-debounce";function f(r,e){var o=n(function(n){r.current&&!r.current.contains(n.target)&&e()},[r,e]);t(function(){if(r.current)return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o,r])}var a=function(){return r(function(){return"undefined"!=typeof window&&(window.location.href.includes("#debug")||"development"===process.env.NODE_ENV)},[])},v="undefined"!=typeof window,s=v?e:t,d=v?function(){var n=o(document.readyState),t=n[0],r=n[1];return s(function(){function n(){r(document.readyState)}return r(document.readyState),document.addEventListener("readystatechange",n,!1),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),t}:function(){},l=[],p=function(n){var t=n.type;"string"==typeof n&&(t=n);var r=[];r.push("string"==typeof n?{type:t}:n),l.forEach(function(n){var e=n[0],o=n[1];"string"==typeof e&&e!==t||("function"!=typeof e||e.apply(void 0,r))&&o.apply(void 0,r)})},h=function(n,r,e){return void 0===e&&(e=[]),t(function(){return function(n,t){if(null==n)throw new Error("Invalid filter");if(null==t)throw new Error("Invalid callback");return l=[].concat(l,[[n,t]]),function(){l=l.filter(function(n){return n[1]!==t})}}(n,r)},[].concat(e,[r,n])),p};function m(n,t){void 0===t&&(t=0),s(function(){if(n){var r=c.add(n,t);return function(){c.remove(r)}}},[n,t])}var w=function(n,r){var e=u(),o=u();return t(function(){e.current=n}),t(function(){if(null!==r)return o.current=setInterval(function(){e.current()},r),function(){return clearInterval(o.current)}},[r]),function(){return clearInterval(o.current)}},y=v?function(){var r=n(function(){try{return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}catch(n){return!1}},[]),e=o(r()),u=e[0],c=e[1],i=n(function(){c(r())},[r]);return t(function(){return i(),window.addEventListener("resize",i,{passive:!0}),function(){window.removeEventListener("resize",i,{passive:!0})}},[i]),u}:function(){},g=function(r){var e=void 0===r?{}:r,c=e.root,i=void 0===c?null:c,f=e.rootMargin,a=void 0===f?"0px":f,v=e.threshold,s=void 0===v?1:v,d=e.once,l=void 0!==d&&d,p=u(),h=u(),m=o(!1),w=m[0],y=m[1],g=n(function(n){h.current||(h.current=n)},[]),E=n(function(n){y(n[0].isIntersecting)},[]);return t(function(){return p.current=new IntersectionObserver(E,{root:i,rootMargin:a,threshold:s}),h.current&&p.current.observe(h.current),function(){p.current&&p.current.disconnect()}},[E]),t(function(){l&&w&&p.current.disconnect()},[w]),{setRef:g,inView:w}},E=function(e){var u=r(function(){if(v)try{return window.matchMedia(e)}catch(n){"production"!==process.env.NODE_ENV&&console.error(n)}return null},[e]),c=o(!!u&&u.matches),i=c[0],f=c[1],a=n(function(n){f(n.matches)},[]);return t(function(){if(u)return a(u),u.addEventListener("change",a,{passive:!0}),function(){u.removeEventListener("change",a,{passive:!0})}},[u,a]),i};function b(){return b=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},b.apply(this,arguments)}function O(n,t){void 0===t&&(t=0);var r=t+n.offsetTop;return n.offsetParent?O(n.offsetParent,r):r}function L(n,t){void 0===t&&(t=0);var r=t+n.offsetLeft;return n.offsetParent?L(n.offsetParent,r):r}function I(r){var e=void 0===r?{}:r,c=e.lazy,f=void 0!==c&&c,a=e.debounce,v=void 0===a?1e3:a,s=u(),d=u(),l=o({}),p=l[0],h=l[1],m=u(p),w=n(function(){if(s.current){var n=O(s.current),t=L(s.current);m.current=b({},m.current,{top:n,left:t}),f||h(m.current)}},[f]);t(function(){var n=i(v,w),t=new ResizeObserver(n);return t.observe(document.body),function(){t.disconnect(),n.cancel({upcomingOnly:!0})}},[v,w]);var y=n(function(n){var t=n[0].contentRect;m.current=b({},m.current,{width:t.width,height:t.height}),f||h(m.current)},[f]),g=n(function(){return m.current},[]);return t(function(){return function(){var n;"development"!==process.env.NODE_ENV&&(null==(n=d.current)||n.disconnect())}},[]),[n(function(n){var t;n&&n!==s.current&&(null==(t=d.current)||t.disconnect(),d.current=new ResizeObserver(y),d.current.observe(n),s.current=n)},[w]),f?g:p]}var P=function(n,t){void 0===n&&(n=[]),void 0===t&&(t=[]);var e=r(function(){return t&&[t].flat()},[t]),o=r(function(){return n&&[n].flat()},[n]);return r(function(){if(e&&o){var t=o.map(function(n){var t;return null==(t=e.find(function(t){return t.type===n}))?void 0:t.props.children});return n[0]?t:t[0]}},[e,o])};export{p as dispatch,a as useDebug,d as useDocumentReadyState,h as useEventBus,m as useFrame,w as useInterval,y as useIsTouchDevice,g as useIsVisible,s as useLayoutEffect,E as useMediaQuery,f as useOutsideClickEvent,I as useRect,P as useSlots};
//# sourceMappingURL=index.mjs.map
