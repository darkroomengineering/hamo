import{useCallback as n,useEffect as t,useMemo as e,useLayoutEffect as r,useState as o,useRef as i}from"react";import{raf as u}from"@studio-freight/tempus";import{nanoid as c}from"nanoid";import{throttle as f}from"throttle-debounce";function a(e,r){var o=n(function(n){e.current&&!e.current.contains(n.target)&&r()},[e,r]);t(function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o])}var d=function(){return e(function(){return"undefined"!=typeof window&&(window.location.href.includes("#debug")||"development"===process.env.NODE_ENV)},[])},v="undefined"!=typeof window?r:t,s="undefined"!=typeof window?function(){var n=o(document.readyState),t=n[0],e=n[1];return v(function(){function n(){e(document.readyState)}return e(document.readyState),document.addEventListener("readystatechange",n,!1),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),t}:function(){},p=[],l=function(n){var t=n.type;"string"==typeof n&&(t=n);var e=[];e.push("string"==typeof n?{type:t}:n),p.forEach(function(n){var r=n[0],o=n[1];"string"==typeof r&&r!==t||("function"!=typeof r||r.apply(void 0,e))&&o.apply(void 0,e)})},h=function(n,e,r){return void 0===r&&(r=[]),t(function(){return function(n,t){if(null!=n&&null!=t)return p=[].concat(p,[[n,t]]),function(){p=p.filter(function(n){return n[1]!==t})}}(n,e)},[].concat(r,[e,n])),l};function m(n,e){void 0===e&&(e=0),t(function(){if(n){var t=u.add(n,e);return function(){u.remove(t)}}},[n,e])}function w(){return e(function(){return c()},[])}var y=function(n,e){var r=i();t(function(){r.current=n}),t(function(){if(null!==e){var n=setInterval(function(){r.current()},e);return function(){return clearInterval(n)}}},[e])},g=function(){var t=o(void 0),e=t[0],r=t[1],i=n(function(){r("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)},[]);return v(function(){return i(),window.addEventListener("resize",i,!1),function(){window.removeEventListener("resize",i,!1)}},[]),e},b=function(e){var r=void 0===e?{}:e,u=r.root,c=void 0===u?null:u,f=r.rootMargin,a=void 0===f?"0px":f,d=r.threshold,v=void 0===d?1:d,s=i(),p=o(!1),l=p[0],h=p[1],m=n(function(n){h(n[0].isIntersecting)},[]);return t(function(){var n=new IntersectionObserver(m,{root:c,rootMargin:a,threshold:v});return s.current&&n.observe(s.current),function(){n.disconnect()}},[m]),{setRef:function(n){s.current||(s.current=n)},inView:l}},E=function(t){var e=o(void 0),r=e[0],i=e[1],u=n(function(n){i(n.matches)},[]);return v(function(){var n=window.matchMedia(t);return u(n),n.addEventListener("change",u),function(){n.removeEventListener("change",u)}}),r};function L(){return L=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},L.apply(this,arguments)}function O(n,t){void 0===t&&(t=0);var e=t+n.offsetTop;return n.offsetParent?O(n.offsetParent,e):e}function P(n,t){void 0===t&&(t=0);var e=t+n.offsetLeft;return n.offsetParent?P(n.offsetParent,e):e}function x(n){var t=(void 0===n?{}:n).debounce,e=void 0===t?1e3:t,r=i(),u=o({top:void 0,left:void 0,width:void 0,height:void 0}),c=u[0],a=u[1],d=function(){r.current&&a(function(n){return L({},n,{top:O(r.current),left:P(r.current)})})};v(function(){var n=f(e,d),t=new ResizeObserver(n);return t.observe(document.body),function(){t.disconnect(),n.cancel({upcomingOnly:!0})}},[e]);var s=function(n){var t=n[0].contentRect,e=t.width,r=t.height;a(function(n){return L({},n,{width:e,height:r})})},p=i();return[function(n){var t;n&&n!==r.current&&(null==(t=p.current)||t.disconnect(),p.current=new ResizeObserver(s),p.current.observe(n),r.current=n)},c,function(n,t){return c}]}var z=function(n,t){void 0===n&&(n=[]),void 0===t&&(t=[]);var r=e(function(){return t&&[t].flat()},[t]),o=e(function(){return n&&[n].flat()},[n]),i=e(function(){return r&&o&&o.map(function(n){var t;return null==(t=r.find(function(t){return t.type===n}))?void 0:t.props.children})},[r,o]);return n[0]?i:i[0]};export{l as dispatch,d as useDebug,s as useDocumentReadyState,h as useEventBus,m as useFrame,w as useId,y as useInterval,g as useIsTouchDevice,b as useIsVisible,v as useLayoutEffect,E as useMediaQuery,a as useOutsideClickEvent,x as useRect,z as useSlots};
//# sourceMappingURL=index.mjs.map
