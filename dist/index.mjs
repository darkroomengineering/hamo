import{useCallback as n,useEffect as t,useMemo as e,useLayoutEffect as r,useState as o,useRef as u}from"react";import{raf as c}from"@studio-freight/tempus";import{throttle as i}from"throttle-debounce";function a(e,r){var o=n(function(n){e.current&&!e.current.contains(n.target)&&r()},[e,r]);t(function(){if(e.current)return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o,e])}var f=function(){return e(function(){return"undefined"!=typeof window&&(window.location.href.includes("#debug")||"development"===process.env.NODE_ENV)},[])},s="undefined"!=typeof window,v=s?r:t,d=v,l=s?function(){var n=o(document.readyState),t=n[0],e=n[1];return v(function(){function n(){e(document.readyState)}return e(document.readyState),document.addEventListener("readystatechange",n,!1),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),t}:function(){},p=[],h=function(n){var t=n.type;"string"==typeof n&&(t=n);var e=[];e.push("string"==typeof n?{type:t}:n),p.forEach(function(n){var r=n[0],o=n[1];"string"==typeof r&&r!==t||("function"!=typeof r||r.apply(void 0,e))&&o.apply(void 0,e)})},m=function(n,e,r){return void 0===r&&(r=[]),t(function(){return function(n,t){if(null==n)throw new Error("Invalid filter");if(null==t)throw new Error("Invalid callback");return p=[].concat(p,[[n,t]]),function(){p=p.filter(function(n){return n[1]!==t})}}(n,e)},[].concat(r,[e,n])),h};function y(n,t){void 0===t&&(t=0),v(function(){if(n){var e=c.add(n,t);return function(){c.remove(e)}}},[n,t])}var w=function(n,e){var r=u(),o=u();return t(function(){r.current=n}),t(function(){if(null!==e)return o.current=setInterval(function(){r.current()},e),function(){return clearInterval(o.current)}},[e]),function(){return clearInterval(o.current)}},g=s?function(){var e=n(function(){try{return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}catch(n){return!1}},[]),r=o(e()),u=r[0],c=r[1],i=n(function(){c(e())},[e]);return t(function(){return i(),window.addEventListener("resize",i,{passive:!0}),function(){window.removeEventListener("resize",i,{passive:!0})}},[i]),u}:function(){},E=function(e){var r=void 0===e?{}:e,c=r.root,i=void 0===c?null:c,a=r.rootMargin,f=void 0===a?"0px":a,s=r.threshold,v=void 0===s?1:s,d=r.once,l=void 0!==d&&d,p=u(),h=u(),m=o(!1),y=m[0],w=m[1],g=n(function(n){h.current||(h.current=n)},[]),E=n(function(n){w(n[0].isIntersecting)},[]);return t(function(){return p.current=new IntersectionObserver(E,{root:i,rootMargin:f,threshold:v}),h.current&&p.current.observe(h.current),function(){p.current&&p.current.disconnect()}},[E]),t(function(){l&&y&&p.current.disconnect()},[y]),{setRef:g,inView:y}},b=function(r){var u=e(function(){if(s)try{return window.matchMedia(r)}catch(n){"production"!==process.env.NODE_ENV&&console.error(n)}return null},[r]),c=o(!!u&&u.matches),i=c[0],a=c[1],f=n(function(n){a(n.matches)},[]);return t(function(){if(u)return f(u),u.addEventListener("change",f,{passive:!0}),function(){u.removeEventListener("change",f,{passive:!0})}},[u,f]),i};function L(){return L=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},L.apply(this,arguments)}function O(n,t){void 0===t&&(t=0);var e=t+n.offsetTop;return n.offsetParent?O(n.offsetParent,e):e}function I(n,t){void 0===t&&(t=0);var e=t+n.offsetLeft;return n.offsetParent?I(n.offsetParent,e):e}function P(e){var r=void 0===e?{}:e,c=r.lazy,a=void 0!==c&&c,f=r.debounce,s=void 0===f?1e3:f,v=u(),d=u(),l=o({}),p=l[0],h=l[1],m=u(p),y=n(function(){if(v.current){var n=O(v.current),t=I(v.current);m.current=L({},m.current,{top:n,left:t}),a||h(m.current)}},[a]);t(function(){var n=i(s,y),t=new ResizeObserver(n);return t.observe(document.body),function(){t.disconnect(),n.cancel({upcomingOnly:!0})}},[s,y]);var w=n(function(n){var t=n[0].contentRect;m.current=L({},m.current,{width:t.width,height:t.height}),a||h(m.current)},[a]),g=n(function(){return m.current},[]);return t(function(){return function(){var n;"development"!==process.env.NODE_ENV&&(null==(n=d.current)||n.disconnect())}},[]),[n(function(n){var t;n&&n!==v.current&&(null==(t=d.current)||t.disconnect(),d.current=new ResizeObserver(w),d.current.observe(n),v.current=n)},[y]),a?g:p]}var D=function(n,t){void 0===n&&(n=[]),void 0===t&&(t=[]);var r=e(function(){return t&&[t].flat()},[t]),o=e(function(){return n&&[n].flat()},[n]);return e(function(){if(r&&o){var t=o.map(function(n){var t;return null==(t=r.find(function(t){return t.type===n}))?void 0:t.props.children});return n[0]?t:t[0]}},[r,o])};export{h as dispatch,f as useDebug,l as useDocumentReadyState,m as useEventBus,y as useFrame,w as useInterval,g as useIsTouchDevice,E as useIsVisible,d as useLayoutEffect,b as useMediaQuery,a as useOutsideClickEvent,P as useRect,D as useSlots};
//# sourceMappingURL=index.mjs.map
